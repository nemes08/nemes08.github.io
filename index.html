<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ayasofya Charity</title>
<link rel="icon" type="image/png" href="images/logo.png">
<style>
:root{
  --accent:#7b4bff;
  --accent-2:#6b3bff;
  --muted:#6f6f7a;
  --success:#16a34a;
  --card-bg: rgba(255,255,255,0.36);
  --glass-blur: 14px;
  --goal:1000;
  --filigran-opacity: 0.18; /* daha belirgin talebine gÃ¶re artÄ±rÄ±ldÄ± */
  --filigran-size: 720px;
}

/* Reset & base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Arial,Helvetica,sans-serif;background:linear-gradient(180deg,#fbf8ff,#eef0fa);color:#111;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
.container{max-width:980px;margin:28px auto;padding:20px;position:relative;z-index:2}

/* FILIGRAN (arka plan) - logo.png kullanÄ±lÄ±yor, daha belirgin */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background: url("images/logo.png") no-repeat center;
  background-size: var(--filigran-size);
  opacity: var(--filigran-opacity);
  z-index:0;
  filter: grayscale(100%) contrast(90%) blur(0.8px);
  pointer-events:none;
}

/* HEADER */
.header{position:relative;z-index:3;display:flex;align-items:center;gap:18px;background:var(--card-bg);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));padding:16px;border-radius:14px;box-shadow:0 10px 30px rgba(2,6,23,0.06)}
.logo{width:130px;height:auto;border-radius:10px}
.brand-title{display:flex;flex-direction:column}
.brand-title h1{margin:0;font-size:20px;color:var(--accent-2)}
.brand-title p{margin:6px 0 0 0;color:var(--muted);font-size:13px}

/* Top controls (language) */
.top-controls{display:flex;gap:8px;margin-left:auto;align-items:center}
.lang-btn{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:6px 10px;border-radius:8px;cursor:pointer;font-weight:600}
.lang-btn.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;border:none;box-shadow:0 8px 24px rgba(107,59,255,0.12)}

/* MAIN CARD */
.card{position:relative;z-index:3;margin-top:18px;background:var(--card-bg);backdrop-filter:blur(var(--glass-blur));-webkit-backdrop-filter:blur(var(--glass-blur));padding:22px;border-radius:18px;box-shadow:0 14px 40px rgba(2,6,23,0.06)}
.heart{font-size:38px;color:#ff3b7a;animation:heartbeat 1.3s infinite;margin-bottom:6px}
@keyframes heartbeat{0%,40%,80%,100%{transform:scale(1)}20%,60%{transform:scale(1.25)}}

/* Status */
#wallet-status{padding:8px 12px;border-radius:999px;font-weight:700;color:var(--success);background:rgba(16,185,129,0.08);opacity:0;transition:opacity .6s}
#wallet-status.pulse{animation:pulse 2s infinite}
@keyframes pulse{0%{text-shadow:0 0 0 rgba(16,185,129,0.0)}50%{text-shadow:0 0 10px rgba(16,185,129,0.55)}100%{text-shadow:0 0 0 rgba(16,185,129,0.0)}}

/* Amount buttons & custom input */
.amounts{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap;align-items:center}
.amount-btn{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:white;border:none;padding:10px 16px;border-radius:12px;font-weight:700;cursor:pointer;transition:transform .15s}
.amount-btn.selected{outline:3px solid rgba(123,75,255,0.12);transform:translateY(-4px)}
.custom-input{padding:10px;border-radius:10px;border:1px solid #e6e6e6;width:140px}

/* Send row */
.send-row{display:flex;gap:12px;margin-top:12px;align-items:center;flex-wrap:wrap}
.send-btn{background:#111;color:white;border:none;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer}
.send-btn[disabled]{opacity:.6;cursor:not-allowed}
.send-note{color:var(--muted);font-weight:600}

/* Progress */
.progress-wrap{margin-top:18px}
.progress-info{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-weight:700;font-size:14px}
.progress-bar{height:14px;background:rgba(123,75,255,0.12);border-radius:999px;overflow:hidden;margin-top:8px}
.progress-fill{height:100%;width:0%;background:linear-gradient(90deg,#9a7dff,#7b4bff);transition:width .6s ease}

/* Stats */
.stats-row{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap}
.stat{background:rgba(255,255,255,0.18);padding:10px;border-radius:12px;min-width:140px;text-align:left}

/* Socials + footer */
.socials{display:flex;gap:12px;justify-content:center;margin-top:16px;flex-wrap:wrap}
.socials a{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.9);text-decoration:none;font-size:18px;box-shadow:0 8px 22px rgba(16,24,40,0.05)}
.footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

/* Modal / toast */
.modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.48);display:flex;align-items:center;justify-content:center;z-index:60;opacity:0;pointer-events:none;transition:opacity .18s}
.modal-backdrop.show{opacity:1;pointer-events:auto}
.modal{background:white;padding:18px;border-radius:12px;max-width:720px;width:92%;box-shadow:0 12px 40px rgba(2,6,23,0.2)}
.close-btn{background:#f3f4f6;border-radius:8px;padding:8px 12px;border:none;cursor:pointer;margin-top:12px}
.toast{position:fixed;right:20px;bottom:24px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;padding:10px 14px;border-radius:12px;box-shadow:0 12px 36px rgba(107,59,255,0.16);opacity:0;transform:translateY(12px);transition:all .28s}
.toast.show{opacity:1;transform:translateY(0)}

/* Responsive */
@media(max-width:720px){
  .header{flex-direction:column;align-items:flex-start}
  .top-controls{margin-left:0}
  .amounts{justify-content:center}
  .stats-row{justify-content:center}
  .container{padding:12px}
}
</style>
</head>
<body>
<div class="container" role="main" aria-label="Ayasofya Charity ana iÃ§erik">

  <!-- HEADER -->
  <div class="header" role="banner" aria-label="Ãœst bilgi">
    <img src="images/logo.png" alt="Ayasofya Logo" class="logo" id="siteLogo">
    <div class="brand-title">
      <h1 id="brandTitle">Ayasofya Charity</h1>
      <p id="brandSub" class="meta">Ä°htiyaÃ§ sahiplerine destek â€” Pi Network Ã¼zerinden ÅŸeffaf baÄŸÄ±ÅŸ</p>
    </div>

    <div class="top-controls" role="toolbar" aria-label="Dil seÃ§enekleri">
      <button class="lang-btn active" id="btnTR" aria-pressed="true">TR</button>
      <button class="lang-btn" id="btnEN" aria-pressed="false">EN</button>
    </div>
  </div>

  <!-- MAIN CARD -->
  <section class="card" aria-labelledby="donateTitle">
    <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
      <div>
        <div class="heart" aria-hidden="true">ğŸ’œ</div>
      </div>
      <div style="flex:1">
        <h2 id="donateTitle">BaÄŸÄ±ÅŸ Yap</h2>
        <div id="wallet-status" aria-live="polite">ğŸ”„ BaÄŸlantÄ± kontrol ediliyor...</div>
      </div>
    </div>

    <!-- Amounts -->
    <div class="amounts" role="group" aria-label="BaÄŸÄ±ÅŸ miktarlarÄ±">
      <button class="amount-btn" data-amt="1">1 Pi</button>
      <button class="amount-btn" data-amt="5">5 Pi</button>
      <button class="amount-btn" data-amt="10">10 Pi</button>
      <input type="number" id="customAmount" class="custom-input" min="1" placeholder="Ã–zel (Pi)" aria-label="Ã–zel baÄŸÄ±ÅŸ miktarÄ±" />
    </div>

    <!-- Send -->
    <div class="send-row">
      <button id="sendBtn" class="send-btn" aria-disabled="true" disabled>BaÄŸÄ±ÅŸÄ± GÃ¶nder</button>
      <div id="payment-status" aria-live="polite" class="send-note"></div>
    </div>

    <!-- Progress / Goal -->
    <div class="progress-wrap" aria-hidden="false">
      <div class="progress-info">
        <div id="progressLabel">Toplam: <span id="totalDonated">0</span> Pi</div>
        <div id="goalLabel">Hedef: <span id="goalValue">1000</span> Pi</div>
      </div>
      <div class="progress-bar" aria-hidden="true">
        <div class="progress-fill" id="progressFill" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-row" role="list">
      <div class="stat" role="listitem">BaÄŸÄ±ÅŸ SayÄ±sÄ±: <strong id="donationCount">0</strong></div>
      <div class="stat" role="listitem">Son BaÄŸÄ±ÅŸ: <strong id="lastDonation">-</strong></div>
    </div>

    <!-- Socials -->
    <div class="socials" role="navigation" aria-label="Sosyal medya">
      <a href="https://x.com/uursemen2" target="_blank" title="X">ğŸ•Šï¸</a>
      <a href="https://facebook.com/share/1ZeKpjp33v" target="_blank" title="Facebook">ğŸ“˜</a>
      <a href="https://t.me/uur1453" target="_blank" title="Telegram">ğŸ’¬</a>
      <a href="https://instagram.com/uursemen08" target="_blank" title="Instagram">ğŸ“¸</a>
      <a href="https://tiktok.com/@semenuur" target="_blank" title="TikTok">ğŸµ</a>
      <a href="https://youtube.com/@uursemen08" target="_blank" title="YouTube">â–¶ï¸</a>
    </div>

    <div style="margin-top:14px">
      <button class="lang-btn" id="policyBtn">Gizlilik & GÃ¼ven</button>
    </div>

  </section>

  <div class="footer">Â© <span id="year">2025</span> Ayasofya Charity | TÃ¼m haklarÄ± saklÄ±dÄ±r</div>
</div>

<!-- PRIVACY / POLICY MODAL -->
<div class="modal-backdrop" id="policyModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="policyTitle">
  <div class="modal">
    <h3 id="policyTitle">Gizlilik PolitikasÄ± / Privacy Policy</h3>
    <div id="policyContent" style="max-height:60vh;overflow:auto;text-align:left;color:#111;line-height:1.45">
      <!-- filled by JS -->
    </div>
    <button class="close-btn" id="closePolicy">Kapat</button>
  </div>
</div>

<!-- THANK YOU TOAST -->
<div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true">TeÅŸekkÃ¼rler â€” baÄŸÄ±ÅŸÄ±nÄ±z alÄ±ndÄ± ğŸ’œ</div>

<script>
/* CONFIG */
const RECEIVER = "uur1453";
const GOAL = 1000;

/* LANG content */
const LANG = {
  tr: {
    brandTitle: "Ayasofya Charity",
    brandSub: "Ä°htiyaÃ§ sahiplerine destek â€” Pi Network Ã¼zerinden ÅŸeffaf baÄŸÄ±ÅŸ",
    donateTitle: "BaÄŸÄ±ÅŸ Yap",
    walletChecking: "ğŸ”„ BaÄŸlantÄ± kontrol ediliyor...",
    walletValid: "âœ… Valide baÄŸlantÄ± saÄŸlandÄ±!",
    sendBtn: "BaÄŸÄ±ÅŸÄ± GÃ¶nder",
    goalLabel: "Hedef",
    totalLabel: "Toplam",
    privacyTitle: "Gizlilik PolitikasÄ±",
    privacyText: `<p><strong>KÄ±sa Ã–zet</strong></p>
      <p>Ayasofya Charity (\"VakÄ±f\") kullanÄ±cÄ±larÄ±n kiÅŸisel bilgilerini asgari dÃ¼zeyde toplar. BaÄŸÄ±ÅŸ iÅŸlemleri doÄŸrudan Pi Network altyapÄ±sÄ± aracÄ±lÄ±ÄŸÄ±yla gerÃ§ekleÅŸtirilir. KiÅŸisel veriler (e-posta, telefon vb.) yalnÄ±zca kullanÄ±cÄ±nÄ±n aÃ§Ä±k rÄ±zasÄ± ile toplanÄ±r ve Ã¼Ã§Ã¼ncÃ¼ taraflarla paylaÅŸÄ±lmaz.</p>
      <p><strong>Veri Toplama ve KullanÄ±m</strong></p>
      <ul><li>Bu demo site baÄŸÄ±ÅŸ geÃ§miÅŸini sunucuda saklamaz. Ãœretim ortamÄ±nda aÃ§Ä±k rÄ±za ve KVKK/GDPR uyumlu prosedÃ¼rler uygulanmalÄ±dÄ±r.</li>
      <li>BaÄŸÄ±ÅŸ iÅŸlemleri Pi tarayÄ±cÄ±sÄ±/protokolÃ¼ ile doÄŸrudan kullanÄ±cÄ± cÃ¼zdanÄ±ndan yapÄ±lÄ±r; site ÅŸifre/Ã¶zel anahtar istemez.</li></ul>
      <p><strong>GÃ¼venlik</strong></p>
      <p>Site TLS/HTTPS Ã¼zerinden sunulmalÄ±; Ã¼Ã§Ã¼ncÃ¼ taraf Ã¶deme akÄ±ÅŸlarÄ± yalnÄ±zca gÃ¼venilir protokoller (pi://) ile baÅŸlatÄ±lmalÄ±dÄ±r.</p>
      <p><strong>Sorumluluk Reddi</strong></p>
      <p>VakÄ±f, baÄŸÄ±ÅŸlarÄ±n daÄŸÄ±tÄ±mÄ±nÄ± belgelemeye gayret eder; ancak teknik hatalar, aÄŸ sorunlarÄ± veya Ã¼Ã§Ã¼ncÃ¼ taraf hizmet saÄŸlayÄ±cÄ± arÄ±zalarÄ±ndan kaynaklanan gecikmelerden sorumlu tutulamaz.</p>`
  },
  en: {
    brandTitle: "Ayasofya Charity",
    brandSub: "Support for those in need â€” Transparent donations via Pi Network",
    donateTitle: "Donate",
    walletChecking: "ğŸ”„ Checking connection...",
    walletValid: "âœ… Valid connection established!",
    sendBtn: "Send Donation",
    goalLabel: "Goal",
    totalLabel: "Total",
    privacyTitle: "Privacy Policy",
    privacyText: `<p><strong>Summary</strong></p>
      <p>Ayasofya Charity (the "Foundation") minimizes collection of personal data. Donation transactions occur via the Pi Network infrastructure. Personal data (email, phone, etc.) is collected only with explicit consent and is not shared with third parties.</p>
      <p><strong>Data Collection & Use</strong></p>
      <ul><li>This demo site does not store donation history on a server. For production, explicit consent and GDPR/KVKK-compliant storage procedures should be implemented.</li>
      <li>Donation transactions are initiated from the user's wallet via the Pi protocol; the site does not request passwords/private keys.</li></ul>
      <p><strong>Security</strong></p>
      <p>The site should be served over TLS/HTTPS; third-party payment flows must be initiated using trusted protocols (pi://).</p>
      <p><strong>Disclaimer</strong></p>
      <p>The Foundation will document routing of donations to beneficiaries; however, it is not liable for delays caused by technical issues, network problems, or third-party service interruptions.</p>`
  }
};

/* DOM */
const btnTR = document.getElementById('btnTR');
const btnEN = document.getElementById('btnEN');
const brandTitle = document.getElementById('brandTitle');
const brandSub = document.getElementById('brandSub');
const walletStatus = document.getElementById('wallet-status');
const sendBtn = document.getElementById('sendBtn');
const amountBtns = Array.from(document.querySelectorAll('.amount-btn'));
const customInput = document.getElementById('customAmount');
const totalDonatedEl = document.getElementById('totalDonated');
const donationCountEl = document.getElementById('donationCount');
const lastDonationEl = document.getElementById('lastDonation');
const progressFill = document.getElementById('progressFill');
const policyBtn = document.getElementById('policyBtn');
const policyModal = document.getElementById('policyModal');
const policyContent = document.getElementById('policyContent');
const closePolicy = document.getElementById('closePolicy');
const toast = document.getElementById('toast');
const goalValueEl = document.getElementById('goalValue');
const progressLabel = document.getElementById('progressLabel');

/* State */
let lang = 'tr';
let selectedAmount = 1;
let totalDonated = 0;
let donationCount = 0;

/* Init */
goalValueEl.textContent = GOAL;
setLanguage('tr');
walletStatus.textContent = LANG[lang].walletChecking;

/* simulate wallet connection */
setTimeout(()=>{
  walletStatus.textContent = LANG[lang].walletValid;
  walletStatus.style.opacity = 1;
  walletStatus.classList.add('pulse');
  sendBtn.disabled = false;
  sendBtn.removeAttribute('aria-disabled');
},900);

/* Language */
function setLanguage(l){
  lang = l;
  btnTR.classList.toggle('active', l==='tr'); btnTR.setAttribute('aria-pressed', l==='tr');
  btnEN.classList.toggle('active', l==='en'); btnEN.setAttribute('aria-pressed', l==='en');

  brandTitle.textContent = LANG[l].brandTitle;
  brandSub.textContent = LANG[l].brandSub;
  document.getElementById('donateTitle').textContent = LANG[l].donateTitle;
  document.getElementById('policyTitle').textContent = LANG[l].privacyTitle;
  policyContent.innerHTML = `<h4>${LANG[l].privacyTitle}</h4>` + LANG[l].privacyText;
  document.getElementById('sendBtn').textContent = LANG[l].sendBtn;
  document.getElementById('progressLabel').textContent = LANG[l].totalLabel + ": ";
}
btnTR.addEventListener('click', ()=>setLanguage('tr'));
btnEN.addEventListener('click', ()=>setLanguage('en'));

/* Amount selection */
amountBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    amountBtns.forEach(b=>b.classList.remove('selected'));
    btn.classList.add('selected');
    selectedAmount = Number(btn.dataset.amt);
    customInput.value = '';
  });
});
customInput.addEventListener('input', ()=>{
  const v = Math.max(0, Math.floor(Number(customInput.value) || 0));
  if(v>0){
    amountBtns.forEach(b=>b.classList.remove('selected'));
    selectedAmount = v;
  }
});

/* Send donation */
sendBtn.addEventListener('click', ()=>{
  const amt = Number(selectedAmount) || 1;
  const memo = encodeURIComponent(lang==='tr' ? "Ayasofya Charity BaÄŸÄ±ÅŸÄ±" : "Ayasofya Charity Donation");
  const piUrl = `pi://pay?recipient=${encodeURIComponent(RECEIVER)}&amount=${amt}&memo=${memo}`;

  if(navigator.userAgent.includes("PiBrowser") || navigator.userAgent.toLowerCase().includes("pi")){
    // In Pi Browser, redirect to payment protocol
    window.location.href = piUrl;
  } else {
    // Demo fallback for regular browsers
    alert(lang==='tr' ? "Pi Browser bulunamadÄ±. Demo kaydÄ± yerelde tutuldu." : "Pi Browser not detected. Demo recorded locally.");
  }

  // UI update (simulate success)
  totalDonated += amt;
  donationCount += 1;
  totalDonatedEl.textContent = totalDonated;
  donationCountEl.textContent = donationCount;
  lastDonationEl.textContent = `${amt} Pi`;
  const pct = Math.min(100, Math.round((totalDonated / GOAL) * 100));
  progressFill.style.width = pct + '%';
  progressFill.setAttribute('aria-valuenow', pct);

  showToast(lang==='tr' ? `TeÅŸekkÃ¼rler â€” ${amt} Pi baÄŸÄ±ÅŸladÄ±nÄ±z ğŸ’œ` : `Thanks â€” you donated ${amt} Pi ğŸ’œ`);
  setTimeout(()=>openThankModal(amt), 450);
});

/* Toast / modal */
let toastTimer;
function showToast(text){
  toast.textContent = text;
  toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=>toast.classList.remove('show'),3500);
}
function openThankModal(amt){
  const modal = document.getElementById('thank-modal');
  if(modal){
    document.getElementById('popup-msg').textContent = lang==='tr' ? `TeÅŸekkÃ¼rler! ${amt} Pi baÄŸÄ±ÅŸladÄ±nÄ±z.` : `Thank you! You donated ${amt} Pi.`;
    modal.classList.add('show');
    setTimeout(()=>modal.classList.remove('show'),3000);
  }
}
/* create simple thank modal dynamically */
const thankModal = document.createElement('div');
thankModal.className = 'modal-backdrop';
thankModal.id = 'thank-modal';
thankModal.setAttribute('aria-hidden','true');
thankModal.innerHTML = `<div class="modal"><h3>${lang==='tr' ? 'TeÅŸekkÃ¼rler! ğŸ™' : 'Thanks! ğŸ™'}</h3><p id="popup-msg">${lang==='tr' ? 'BaÄŸÄ±ÅŸÄ±nÄ±z alÄ±ndÄ±.' : 'Your donation has been received.'}</p><button class="close-btn" onclick="document.getElementById('thank-modal').classList.remove('show')">${lang==='tr' ? 'Kapat' : 'Close'}</button></div>`;
document.body.appendChild(thankModal);

/* Policy modal */
policyBtn.addEventListener('click', ()=>{
  policyModal.classList.add('show');
  policyModal.setAttribute('aria-hidden','false');
});
closePolicy.addEventListener('click', ()=>{
  policyModal.classList.remove('show');
  policyModal.setAttribute('aria-hidden','true');
});

/* SHARE helpers */
function shareX(){ window.open("https://x.com/intent/tweet?text=Ayasofya%20Charity%20ba%C4%9F%C4%B1%C5%9F%20platformu"); }
function shareFB(){ window.open("https://facebook.com/sharer/sharer.php?u="+encodeURIComponent(location.href)); }
function shareTG(){ window.open("https://t.me/share/url?url="+encodeURIComponent(location.href)); }

/* Accessibility: close modals with Esc */
document.addEventListener('keydown', (e)=>{
  if(e.key==='Escape'){
    policyModal.classList.remove('show');
    const tm = document.getElementById('thank-modal');
    tm && tm.classList.remove('show');
  }
});
</script>
</body>
</html>
